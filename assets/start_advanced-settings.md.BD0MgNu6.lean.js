import{_ as a,c as i,a2 as t,o as e}from"./chunks/framework.BQmytedh.js";const c=JSON.parse('{"title":"高级设置","description":"","frontmatter":{},"headers":[],"relativePath":"start/advanced-settings.md","filePath":"start/advanced-settings.md","lastUpdated":1732434079000}'),p={name:"start/advanced-settings.md"};function n(l,s,h,d,o,r){return e(),i("div",null,s[0]||(s[0]=[t(`<h1 id="高级设置" tabindex="-1">高级设置 <a class="header-anchor" href="#高级设置" aria-label="Permalink to &quot;高级设置&quot;">​</a></h1><h2 id="configurate-usb-passthrough-wsl-only" tabindex="-1">Configurate USB passthrough (WSL Only) <a class="header-anchor" href="#configurate-usb-passthrough-wsl-only" aria-label="Permalink to &quot;Configurate USB passthrough (WSL Only)&quot;">​</a></h2><p>若你需要在开发容器中使用 USB 设备（如工业相机、串口等），请进行以下操作。 Linux 系统不需要按照此部分操作。可直接使用 USB 设备。</p><div class="note custom-block github-alert"><p class="custom-block-title">NOTE</p><p>需要更好的解决方案。Docker Desktop 运行于一个基于 Alpine 的 WSL 镜像 <code>docker-desktop</code>，而 usbipd-win 不支持直接 attach 到 <code>docker-desktop</code> 内。<a href="https://github.com/dorssel/usbipd-win/issues/669" target="_blank" rel="noreferrer">此 issue</a> 建议安装一个单独的 Ubuntu 22.04 镜像用于接入 USB。能用但不优雅。</p></div><ol><li><p>下载 usbipd-win &gt;= 4.0</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>winget install usbipd</span></span></code></pre></div></li></ol><div class="important custom-block github-alert"><p class="custom-block-title">IMPORTANT</p><p>请确保你的 <code>usbipd-win</code> 版本 &gt;= 4.0. 你可以手动从 <a href="https://github.com/dorssel/usbipd-win/releases" target="_blank" rel="noreferrer">GitHub Release</a> 安装最新版。</p></div><ol start="2"><li><p>安装 Ubuntu-22.04 WSL</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wsl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">install Ubuntu</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22.04</span></span></code></pre></div><p>首次运行请等待安装完成。安装完成后会自动切入 WSL Ubuntu-22.04 系统内终端。<br><strong>保持此窗口在后台运行，直到完成此部分前不要关闭。</strong></p></li><li><p>列出设备的 BUSID</p><p>启动一个有管理员权限的新终端，运行：</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">usbipd list</span></span></code></pre></div><p>输出应当类似于：</p><div class="language- vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang"></span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span>Connected:</span></span>
<span class="line"><span>BUSID  VID:PID    DEVICE                     STATE</span></span>
<span class="line"><span>1-3    27c6:589a  Goodix fingerprint         Not shared</span></span>
<span class="line"><span>2-3    8087:0032  英特尔(R) 无线 Bluetooth(R)  Not shared</span></span>
<span class="line"><span>3-1    2b7e:b557  XiaoMi USB 2.0 Webcam      Not shared</span></span>
<span class="line"><span></span></span>
<span class="line"><span>Persisted:</span></span>
<span class="line"><span>	GUID                                  DEVICE</span></span></code></pre></div><p>记住你期望在 Docker 中使用的设备的 BUSID。</p></li><li><p>设置默认 WSL Distro</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wsl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">set-default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> Ubuntu</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">22.04</span></span></code></pre></div></li><li><p>配置待穿透设备</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">usbipd bind </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">busid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BUSID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">usbipd attach </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">wsl </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">busid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=&lt;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">BUSID</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">&gt;</span></span></code></pre></div><p><strong>将你需要在 Docker 环境中使用的设备 BUSID 替换掉命令中的 <code>&lt;BUSID&gt;</code>。</strong><br> 例如在上述 <code>usbipd list</code> 的输出示例中，你希望将 XiaoMi USB 2.0 Webcam 映射到 Docker 中：</p><div class="language-powershell vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">powershell</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">usbipd bind </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">--</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">busid</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">=</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">3</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">-</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">1</span></span></code></pre></div></li></ol><div class="tip custom-block github-alert"><p class="custom-block-title">TIP</p><p>每次重启宿主机，你需要重新运行第 5 步。</p></div><h2 id="setup-cuda" tabindex="-1">Setup CUDA <a class="header-anchor" href="#setup-cuda" aria-label="Permalink to &quot;Setup CUDA&quot;">​</a></h2><p>Docker 镜像中已内置 CUDA。不需要进行任何手动配置。<br> 无需安装 CUDA for WSL2 或在 WSL 中安装 CUDA。</p>`,10)]))}const g=a(p,[["render",n]]);export{c as __pageData,g as default};
